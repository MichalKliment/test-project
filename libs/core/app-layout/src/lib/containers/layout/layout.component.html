<div class="app-layout">
  <ng-container *ngIf="appLayoutPortalService.topBar$ | async as tobBar">
    <div class="app-layout__topbar">
      <ng-template [cdkPortalOutlet]="tobBar"></ng-template>
    </div>
  </ng-container>
  <ng-container *ngIf="appLayoutPortalService.sideBar$ | async as sideBar">
    <div class="app-layout__sidebar">
      <ng-template [cdkPortalOutlet]="sideBar"></ng-template>
    </div>
  </ng-container>
  <div class="app-layout__main" [class.app-layout__main--with-sidebar]="appLayoutPortalService.sideBar$ | async"
    [class.app-layout__main--with-topbar]="appLayoutPortalService.topBar$ | async">
    <main>
      <router-outlet></router-outlet>
      <ng-container *ngIf="appLayoutPortalService.main$ |async as main">
        <ng-template [cdkPortalOutlet]="main"></ng-template>
      </ng-container>
    </main>
  </div>
</div>